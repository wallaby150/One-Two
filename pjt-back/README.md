# README



- 프로젝트의 Back-end로 Django REST와 Serializer를 이용해 Front-end의 요청에 따른 Json Response를 제공함



### 실행

```
python -m venv venv
```

```
pip install -r requirements.txt
```

```
python manage.py migrate
```

```
python loaddata data.json
```

```
python manage.py runserver
```





### my_api

- #### admin

  - Django에서 기본적으로 제공하는 admin 기능으로 admin을 이용해 게시글 및 회원 정보 관리가 가능

  - ```
    python manage.py createsuperuser
    ```

  

- #### articles

  - 커뮤니티 게시판을 담당

  - 기본적인 CRUD 기능 및 좋아요 기능 구현

    

- #### movies

  - 페이지 최초 로드 시 유저 체크 기능

  - 영화 목록을 요청에 따라 각각 전체, 한줄평이 달린, 추천 영화로 각각 Serializer에 담아 제공

  - 영화 상세 정보 구현

  - 한줄평에 대한 CRUD 및 좋아요 기능 구현

  - 영화 추천 알고리즘 구현 

    - 최근에 방문한 영화, 좋아요 누른 영화, 한줄평을 남긴 영화를 정한 기준대로 점수화하여 총합이 가장 높은 영화를 선택하여 TMDB 영화 추천 API를 이용하여 사용자에게 제공

    - 기존 DB에 영화 ID값이 포함되어있지 않았기 때문에 영화 ID를 찾는 API를 활용한 뒤 그 결과값을 이용하여 다시 영화 추천 API를 활용함

      

- #### accounts

  - Django restauth에서 제공하지 않는 추가기능을 구현하기 위해 만듦

  - 유저의 프로필 제공

  - 팔로우/팔로잉 목록 제공

  - 팔로우 유무 확인

    

- #### two

  - '더 많이 더 적게' 게임에 필요한 정보를 제공함

  - 게임에서 패배하였을 때 현재의 점수를 나의 최고점수와 비교하여 기록 갱신

  - 랭킹 페이지로 진입하였을 때, 최고 50위까지의 목록을 제공. 단, 총 유저의 수가 50명이 넘는 경우 일찍 가입한 유저일수록 상단에 위치하며, 총 유저의 수가 50명이 되지 않았다면 모든 유저가 출력됨

    

- #### restauth

  - Django에서 기본적으로 제공하는 인증 및 API관련 전반적인 기능

    

- #### restauth/signup

  - 회원가입 기능





### DB 구성

1. TMDB API로 평점이 높은 순으로 1000개의 영화 목록을 받아와 db.sqlite3에 저장
2. sqlite3을 이용하여 해당 db를 csv파일로 출력
3. csv파일 첫 줄에 컬럼명을 추가
4. 해당 csv파일을 NaverAPI.py를 이용하여 평론가 한줄평을 크롤링해올 것
5. csv파일을 열고 영화제목과 개봉연도를 데이터로 받아온 뒤 네이버 영화에서 정확히 일치하는 영화를 검색하여 해당 영화의 평론 페이지를 타겟으로 하여 BeautifulSoup를 이용하여 소속, 이름, 한줄평을 크롤링한 뒤 적절하게 전처리하여 csv파일을 생성함
6. 기존의 db.sqlite3 을 csv 파일로 만든 것에 NaverAPI를 이용하여 생성된 csv파일을 합쳐 새로운 컬럼이 추가된 csv파일을 생성
7. 해당 csv 파일을 sqlite3을 이용하여 프로젝트의 db.sqlite3에 새로 저장







### 어려웠던 점

- 기획의 어려움. 처음 ERD를 작성하기 위해 어떤 기능을 구현할 것이고 그에 따라 어떤 Model이 필요하고 앱의 모델끼리 어떤 관계를 맺고있어야하는지를 기획하는 것이 가장 어려웠다. 결국 ERD 작성 후 백엔드를 개발하면서 계속해서 ERD를 수정해야했고 관계가 꼬이는 부분과 불필요하게 복잡해지는 경향이 있었다. 프로젝트의 시간이 부족하여 해당 부분을 수정하지 못했는데 추후에 시간이 생기면 모델 관계를 고려하여 기능을 다시 배치하여 간결하게 작성할 수 있을 것 같다.

  

- 주요 컨셉이었던 평론가의 한줄평을 가져오기 위해 크롤링이 필요했는데 관련 지식이 없어 처음부터 BeautifulSoup를 공부해서 어떻게 데이터를 받아와서 어떻게 전처리를 해야하는가에서 프로젝트의 시간을 많이 뺏겼다. 

   

- DB를 만드는데 API를 통해 받아온 데이터를 처리하는 과정에서 sqlite3과 csv 파일 사이를 오가는 과정 또한 처음 겪어보는 상황이었기 때문에 1000개의 영화목록을 담은 DB를 만드는 것 또한 어려운 일이었다. 

  

- User와 관련해 Django에서 기본적으로 제공해주는 기능외에 추가적인 기능이 필요했는데 처음 rest Framework를 적용한 경우 restauth의 url이 accounts로 되어있어 추가 기능을 어떻게 추가해야하는지에 대해 고민이 많았는데, restauth에 대한 url를 다른 url로 수정해주고 내가 추가 기능을 추가할 User모델을 accounts에 작성하는 것으로 해결할 수 있었음.

  

- 영화 추천 알고리즘을 구현할 때, 추천에 관한 멋진 알고리즘을 구현하고 싶었는데 그러기 위해서는 1000개 밖에 되지 않는 영화목록과 10명이 채 되지 않는 유저목록으로는 생각하는대로 구현할 수 없었기 때문에 부득이하게 여러 논의 끝에 일정한 가중치를 설정하여 영화 추천 알고리즘을 구현하였음.